---
import BaseLayout from '@/layouts/BaseLayout.astro';
import { getCollection } from 'astro:content';

const title = 'Simio CodeLabs - Custom Software for Your Business';
const description = 'I transform manual processes into intelligent systems that scale your operation. Custom software development, e-commerce, automation and more.';

const blogPosts = await getCollection('blog', ({ data }) => {
  return data.lang === 'en' && !data.draft;
});

const portfolioItems = await getCollection('portfolio', ({ data }) => {
  return data.lang === 'en';
});

const recentPosts = blogPosts
  .sort((a, b) => b.data.publishDate.valueOf() - a.data.publishDate.valueOf())
  .slice(0, 3);

const featuredProjects = portfolioItems.slice(0, 3);
---

<BaseLayout title={title} description={description} lang="en">
  <div class="min-h-screen bg-background">
    <section class="relative overflow-hidden px-6 py-24 sm:py-32 lg:px-8">
      <div class="mx-auto max-w-4xl text-center">
        <h1 class="text-4xl font-bold tracking-tight text-foreground sm:text-6xl">
          Your business, optimized with <span class="text-primary">custom software</span>
        </h1>
        <p class="mt-6 text-lg leading-8 text-muted-foreground">
          I transform manual processes into intelligent systems that scale your operation. No templates, no generic solutions. Just code that solves your specific problems.
        </p>
        <div class="mt-10 flex items-center justify-center gap-x-6">
          <a
            href="#contact"
            class="rounded-md bg-primary px-3.5 py-2.5 text-sm font-semibold text-primary-foreground shadow-sm hover:bg-primary/90 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-primary"
          >
            ðŸš€ Schedule Free Consultation
          </a>
          <a href="/en/services/" class="text-sm font-semibold leading-6 text-foreground">
            Learn more <span aria-hidden="true">â†’</span>
          </a>
        </div>
      </div>
    </section>

    <section class="px-6 py-24 sm:py-32 lg:px-8 bg-muted/50">
      <div class="mx-auto max-w-7xl">
        <div class="mx-auto max-w-2xl text-center">
          <h2 class="text-3xl font-bold tracking-tight text-foreground sm:text-4xl">
            Is your operation stuck in 'manual mode'?
          </h2>
          <p class="mt-4 text-lg text-muted-foreground">
            If you recognize any of these symptoms, your business needs automation:
          </p>
        </div>
        <div class="mx-auto mt-16 max-w-5xl grid grid-cols-1 gap-8 sm:grid-cols-2 lg:grid-cols-4">
          {[
            {
              title: 'Slow processes',
              description: 'Repetitive tasks consuming hours of your team\'s time every week'
            },
            {
              title: 'Scattered data',
              description: 'Information in Excel, paper, and multiple disconnected systems'
            },
            {
              title: 'Human errors',
              description: 'Costly mistakes from manual operation and lack of automation'
            },
            {
              title: 'Limited growth',
              description: 'Can\'t scale without constantly hiring more people'
            }
          ].map((item) => (
            <div class="rounded-lg border bg-card p-6 shadow-sm">
              <h3 class="text-lg font-semibold text-card-foreground">{item.title}</h3>
              <p class="mt-2 text-sm text-muted-foreground">{item.description}</p>
            </div>
          ))}
        </div>
      </div>
    </section>

    <section class="px-6 py-24 sm:py-32 lg:px-8">
      <div class="mx-auto max-w-7xl">
        <div class="mx-auto max-w-2xl text-center">
          <h2 class="text-3xl font-bold tracking-tight text-foreground sm:text-4xl">
            Services
          </h2>
          <p class="mt-4 text-lg text-muted-foreground">
            Software solutions designed to grow your business
          </p>
        </div>
        <div class="mx-auto mt-16 max-w-5xl">
          <div class="grid grid-cols-1 gap-8 sm:grid-cols-2">
            {[
              {
                title: 'Process Automation',
                description: 'Eliminate repetitive tasks and free up your team\'s time',
                tech: 'Python, Node.js, APIs'
              },
              {
                title: 'Custom E-commerce',
                description: 'Online stores optimized for conversion',
                tech: 'Shopify, WooCommerce, Custom'
              },
              {
                title: 'Management Systems',
                description: 'ERPs and CRMs that adapt to your workflow',
                tech: 'React, PostgreSQL, REST APIs'
              },
              {
                title: 'Landing Pages',
                description: 'Pages that convert visitors into customers',
                tech: 'Astro, React, Tailwind'
              }
            ].map((service) => (
              <div class="rounded-lg border bg-card p-8 shadow-sm hover:shadow-md transition-shadow">
                <h3 class="text-xl font-semibold text-card-foreground">{service.title}</h3>
                <p class="mt-3 text-muted-foreground">{service.description}</p>
                <p class="mt-4 text-sm font-mono text-muted-foreground">{service.tech}</p>
              </div>
            ))}
          </div>
          <div class="mt-12 text-center">
            <a
              href="/en/services/"
              class="inline-flex items-center justify-center rounded-md bg-primary px-6 py-3 text-sm font-semibold text-primary-foreground shadow-sm hover:bg-primary/90"
            >
              View all services
            </a>
          </div>
        </div>
      </div>
    </section>

    {featuredProjects.length > 0 && (
      <section class="px-6 py-24 sm:py-32 lg:px-8 bg-muted/50">
        <div class="mx-auto max-w-7xl">
          <div class="mx-auto max-w-2xl text-center">
            <h2 class="text-3xl font-bold tracking-tight text-foreground sm:text-4xl">
              Case Studies
            </h2>
            <p class="mt-4 text-lg text-muted-foreground">
              Real results from completed projects
            </p>
          </div>
          <div class="mx-auto mt-16 max-w-5xl">
            <div class="grid grid-cols-1 gap-8 sm:grid-cols-2 lg:grid-cols-3">
              {featuredProjects.map((project) => (
                <a
                  href={`/en/portfolio/${project.slug.replace(/^(es|en)\//, '')}/`}
                  class="group rounded-lg border bg-card overflow-hidden shadow-sm hover:shadow-md transition-shadow"
                >
                  <div class="aspect-video bg-muted" />
                  <div class="p-6">
                    <h3 class="text-lg font-semibold text-card-foreground group-hover:text-primary transition-colors">
                      {project.data.title}
                    </h3>
                    <p class="mt-2 text-sm text-muted-foreground line-clamp-2">
                      {project.data.description}
                    </p>
                    {project.data.metrics && (
                      <p class="mt-4 text-sm font-semibold text-primary">
                        {project.data.metrics.improvement}
                      </p>
                    )}
                  </div>
                </a>
              ))}
            </div>
            <div class="mt-12 text-center">
              <a
                href="/en/portfolio/"
                class="inline-flex items-center justify-center rounded-md bg-primary px-6 py-3 text-sm font-semibold text-primary-foreground shadow-sm hover:bg-primary/90"
              >
                View all projects
              </a>
            </div>
          </div>
        </div>
      </section>
    )}

    {recentPosts.length > 0 && (
      <section class="px-6 py-24 sm:py-32 lg:px-8">
        <div class="mx-auto max-w-7xl">
          <div class="mx-auto max-w-2xl text-center">
            <h2 class="text-3xl font-bold tracking-tight text-foreground sm:text-4xl">
              Blog
            </h2>
            <p class="mt-4 text-lg text-muted-foreground">
              Insights on software development and business automation
            </p>
          </div>
          <div class="mx-auto mt-16 max-w-5xl">
            <div class="grid grid-cols-1 gap-8 sm:grid-cols-2 lg:grid-cols-3">
              {recentPosts.map((post) => (
                <a
                  href={`/en/blog/${post.slug.replace(/^(es|en)\//, '')}/`}
                  class="group rounded-lg border bg-card overflow-hidden shadow-sm hover:shadow-md transition-shadow"
                >
                  <div class="aspect-video bg-muted" />
                  <div class="p-6">
                    <div class="flex gap-2 mb-3">
                      {post.data.tags.slice(0, 2).map((tag) => (
                        <span class="inline-flex items-center rounded-md bg-primary/10 px-2 py-1 text-xs font-medium text-primary">
                          {tag}
                        </span>
                      ))}
                    </div>
                    <h3 class="text-lg font-semibold text-card-foreground group-hover:text-primary transition-colors line-clamp-2">
                      {post.data.title}
                    </h3>
                    <p class="mt-2 text-sm text-muted-foreground line-clamp-2">
                      {post.data.description}
                    </p>
                    <p class="mt-4 text-xs text-muted-foreground">
                      {new Date(post.data.publishDate).toLocaleDateString('en-US', {
                        year: 'numeric',
                        month: 'long',
                        day: 'numeric'
                      })}
                    </p>
                  </div>
                </a>
              ))}
            </div>
            <div class="mt-12 text-center">
              <a
                href="/en/blog/"
                class="inline-flex items-center justify-center rounded-md bg-primary px-6 py-3 text-sm font-semibold text-primary-foreground shadow-sm hover:bg-primary/90"
              >
                View all articles
              </a>
            </div>
          </div>
        </div>
      </section>
    )}

    <section id="contact" class="px-6 py-24 sm:py-32 lg:px-8 bg-primary text-primary-foreground">
      <div class="mx-auto max-w-4xl text-center">
        <h2 class="text-3xl font-bold tracking-tight sm:text-4xl">
          Ready to optimize your business?
        </h2>
        <p class="mt-6 text-lg leading-8 opacity-90">
          Schedule a free 30-minute consultation. We'll analyze your operation and show you how custom software can transform your business.
        </p>
        <div class="mt-10">
          <a
            href="mailto:nestor@simiocodelabs.com"
            class="rounded-md bg-white px-6 py-3 text-sm font-semibold text-primary shadow-sm hover:bg-white/90 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-white"
          >
            nestor@simiocodelabs.com
          </a>
        </div>
      </div>
    </section>
  </div>
</BaseLayout>
